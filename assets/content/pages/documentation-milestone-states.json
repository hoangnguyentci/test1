{"pageTitle":"Documentation Milestone States","pageBlocks":[{"sectionEntryTitle":"Documentation Milestone States Section","sectionMessage":"# Milestone States #\nWe covered retrieving milestones when getting a listing, but often the date and type of milestone doesn't provide enough context to the end user, so we created object called milestone state. The state object comprises of 4 attributes.\n\n**State**\nThe state of a milestone can be one of `none`, `ok`, `actionable`, where some action is required such as unlocking funding, or `requires_attention` where the listing has potentially fallen through and the milestones needs to be confirmed. In View My Chain we use the state as an idicator of the colour a milestone should be for example, a `state` of `ok` would render the milestone as green.\n\n**Concern**\nThis is a statement or warning to explain the state a little more. This can also be `null`. Inside View My Chain we use as the tooltip on the milestone, and render this on the editor to give the user more information.\n\n**Heading**\t\nIn the milestones current state, the name of the milestone would be more apt if it were called by this value instead such as `Possible Searches` instead of `Searches Ordered`. This can be `null`.\n\n**Status**\nThe status of the milestone can be one of `warning`, where the milestone has changed unexpectedly, `locked`, where the milestone is locked pending an action, `dubious`, where the milestone needs to confirmed or corrected, or `null`. View My Chain use this to display an icon to the user to indicate that something is not right.\n\nThere are two ways to retrieve milestone state.\n\n### A Single Milestone State ###\nIf you would like to find the milestone state of a milestone for a given listing, then this is the method for you.\n\n```shell\ncurl \\\n  -H \"Content-Type: application\/json\" \\\n  -H \"Authorization: Bearer <YOUR-ACCESS-TOKEN>\" \\\n  -X POST -d '{\"milestone\":\"sstc\"}' \\\n  https:\/\/admin.viewmychain.com\/api\/v1\/listing\/1\/milestone\/state\n```\n\nThis will return the milestone state of the SSTC milestone for listing 1:\n```json\n{\n  \"message\": \"success\",\n  \"success\": true,\n  \"data\": {\n    \"result\": {\n      \"state\": \"requires_attention\",\n      \"concern\": \"Possible fall through has been seen\",\n      \"heading\": \"SSTC\",\n      \"status\": \"warning\"\n    }\n  }\n}\n```\n\nHere is a list of the milestone short names that you can pass in:\n\n| Name                     | Short Name               |\n| ------------------------ | ------------------------ |\n| SSTC                     | sstc                     |\n| Draft Contracts Prepared | draft_contracts_prepared |\n| Searches Ordered         | searches_ordered         |\n| Searches Expected        | searches_expected        |\n| Funding Applied          | funding_applied          |\n| Proposed Exchange        | proposed_exchange        |\n| Proposed Completion      | proposed_completion      |\n| Enquiries Opened         | enquiries_opened         |\n| Enquiries Closed         | enquiries_closed         |\n| Survey Booker For        | survey_booked_for        |\n| Survey Satisfactory      | survey_satisfactory      |\n\n### Getting all Milestone States ###\nIf you want to get all milestone states of a listing then you are better using the include method:\n\n```shell\ncurl \\\n  -H \"Content-Type: application\/json\" \\\n  -H \"Authorization: Bearer <YOUR-ACCESS-TOKEN>\" \\\n  -X GET https:\/\/admin.viewmychain.com\/api\/v1\/listing\/1461063?includes=milestone_states\n```\n\nThis will return the following milestone states:\n\n* SSTC\n* Draft Contracts Prepared\n* Searches Ordered\n* Searches Expected\n* Funding Applied\n* Proposed Exchange\n* Proposed Completion\n* LandReg Completion <sup>1<\/sup>\n* Enquiries Opened\n* Enquiries Closed\n* Survey Booked For\n* Survey Satisfactory\n* LastLandRegCompletion <sup>2<\/sup>\n\n\n<small><sup>1<\/sup> This milestones completion date is the date the Land Registry flagged the completion of the property.<\/small>\n\n<small><sup>2<\/sup> This milestones completion date is the date of the completion date according the Land Registry, many of the milestones in View My Chain must be after the `LastLandRegCompletion` completion date.<\/small>\n\nThe response will look like something this:\n```json\n{\n\t\"data\":{\n  \t\"type\":\"listing\",\n\t\t\"id\":\"1461063\",\n\t\t\"attributes\":{\n\t\t\t\"created_at\":1502668800,\n\t\t\t\"updated_at\":1513641600,\n\t\t\t\"deleted_at\":null,\n\t\t\t\"status_changedate\":1510185600,\n\t\t\t\"date_last_received\":1516838400,\n\t\t\t\"address_id\":3474354223467,\n\t\t\t\"branch_id\":28744,\n\t\t\t\"price\":270000,\n\t\t\t\"chain_link_id\":\"EA5AB156-5B06-468C-A210-8AA8570C80AE\",\n\t\t\t\"is_locked\":false,\n\t\t\t\"full_address\":\"53 HALL AVENUE, NORFOLK, NE5 5PG\",\n\t\t\t\"address_street_name\":\"53 HALL AVENUE\",\n\t\t\t\"address_area\":\"NORFOLK\",\n\t\t\t\"address_postal_code\":\"NE5 5PG\"\n\t\t},\n\t\t\"relationships\":{\n\t\t\t\"milestone_states\":{\n\t\t\t\t\"data\":{\n\t\t\t\t\t\"type\":\"milestone_states\",\n\t\t\t\t\t\"id\":\"1461063\"\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\t\"included\":[{\n\t\t\"type\":\"milestone_states\",\n\t\t\"id\":\"1461063\",\n\t\t\"attributes\":{\n\t\t\t\"SSTC\":{\n\t\t\t\t\"concern\":null,\n\t\t\t\t\"heading\":null,\n\t\t\t\t\"status\":null,\n\t\t\t\t\"state\":\"ok\"\n\t\t\t},\n\t\t\t\"Draft Contracts Prepared\":{\n\t\t\t\t\"concern\":null,\n\t\t\t\t\"heading\":null,\n\t\t\t\t\"status\":null,\n\t\t\t\t\"state\":\"none\"\n\t\t\t},\n\t\t\t\"Searches Ordered\":{\n\t\t\t\t\"concern\":\"Check with conveyancer to confirm searches have been ordered\",\n\t\t\t\t\"status\":\"warning\",\n\t\t\t\t\"heading\":\"No Search Found\",\n\t\t\t\t\"state\":\"requires_attention\"\n\t\t\t},\n\t\t\t\"Searches Expected\":{\n\t\t\t\t\"concern\":\"Searches Ordered needs to be completed before they can be expected\",\n\t\t\t\t\"heading\":null,\n\t\t\t\t\"status\":null,\n\t\t\t\t\"state\":\"none\"\n\t\t\t},\n\t\t\t\"Funding Applied\":{\n\t\t\t\t\"concern\":\"Invite the purchaser to unlock funding information\",\n\t\t\t\t\"status\":\"locked\",\n\t\t\t\t\"state\":\"actionable\",\n\t\t\t\t\"heading\":null\n\t\t\t},\n\t\t\t\"Enquiries Opened\":{\n\t\t\t\t\"concern\":null,\n\t\t\t\t\"heading\":null,\n\t\t\t\t\"status\":null,\n\t\t\t\t\"state\":\"none\"\n\t\t\t},\n\t\t\t\"Enquiries Closed\":{\n\t\t\t\t\"concern\":\"Enquiries resolved\",\n\t\t\t\t\"state\":\"ok\",\n\t\t\t\t\"heading\":null,\n\t\t\t\t\"status\":null\n\t\t\t},\n\t\t\t\"Proposed Completion\":{\n\t\t\t\t\"concern\":null,\n\t\t\t\t\"heading\":null,\n\t\t\t\t\"status\":null,\n\t\t\t\t\"state\":\"none\"\n\t\t\t},\n\t\t\t\"LandReg Completion\":{\n\t\t\t\t\"state\":\"none\",\n\t\t\t\t\"concern\":null,\n\t\t\t\t\"heading\":null,\n\t\t\t\t\"status\":null\n\t\t\t},\n\t\t\t\"LastLandRegCompletion\":{\n\t\t\t\t\"concern\":null,\n\t\t\t\t\"heading\":null,\n\t\t\t\t\"status\":null,\n\t\t\t\t\"state\":\"none\"\n\t\t\t},\n\t\t\t\"Survey Booked For\":{\n\t\t\t\t\"state\":\"none\",\n\t\t\t\t\"concern\":null,\n\t\t\t\t\"heading\":null,\n\t\t\t\t\"status\":null\n\t\t\t},\n\t\t\t\"Survey Satisfactory\":{\n\t\t\t\t\"concern\":null,\n\t\t\t\t\"heading\":null,\n\t\t\t\t\"status\":null,\n\t\t\t\t\"state\":\"none\"\n\t\t\t},\n\t\t}\n\t}]\n}\n```\n\n**API References**\n[https:\/\/admin.viewmychain.com\/api\/v1\/listing\/{listing}\/milestone\/state](\/docs\/api\/#operation\/listing-milestone-state)\n[https:\/\/admin.viewmychain.com\/api\/v1\/listing\/{listing}](\/docs\/api\/#operation\/get-listing)","sectionClass":"standard--static","sectionType":"StandardSection","sysMeta":{"createdAt":"2018-01-26T13:44:44.316Z","updatedAt":"2018-02-07T14:36:01.253Z","contentType":"section"}},{"sectionEntryTitle":"Documentation Milestone Group State Section","sectionMessage":"### Milestone Group States ###\n\nWith the introduction of grouping milestones, you can now retrieve a state for milestone group. The request looks quite similar:\n```\nGET https:\/\/admin.viewmychain.com\/api\/v1\/listing\/{listing_id}\/group-state\n```\nBut the response object is slightly different to the milestone type state.\nIt will look a little like this:\n```JSON\n{\n  \"success\":true,\n  \"message\":\"success\",\n  \"errors\":[],\n  \"data\":{\n    \"SSTC\":{\n      \"state\":\"fulfilled\",\n      \"key_milestone\":1513900800,\n      \"context\":null,\n      \"requires_action\":false,\n      \"requires_confirmation\":false\n    },\n    \"Searches\":{\n      \"state\":\"fulfilled\",\n      \"key_milestone\":1516665600,\n      \"context\":\"Confirm searches have been received\",\n      \"requires_action\":false,\n      \"requires_confirmation\":false\n    },\n    \"Funding\":{\n      \"state\":\"none\",\n      \"key_milestone\":null,\n      \"context\":null,\n      \"requires_action\":false,\n      \"requires_confirmation\":false\n    },\n    \"Enquiries\":{\n      \"state\":\"none\",\n      \"key_milestone\":null,\n      \"context\":null,\n      \"requires_action\":false,\n      \"requires_confirmation\":false\n    },\n    \"Completion\":{\n      \"state\":\"none\",\n      \"key_milestone\":null,\n      \"context\":null,\n      \"requires_action\":false,\n      \"requires_confirmation\":false\n    }\n  }\n}\n```\n\n##### Explanation of Terms #####\n\n| Key | Explanation | Available Values |\n| --- | --- | --- |\n| `state` | This is the state of the milestone group, View My Chain use this to set the colour of a listings group in the progress bar | `none`, `fulfilled`, `warning` |\n| `key_milestone` | Usually this is the unix timestamp of the key milestone within this group if it is available, otherwise null, there is one caveat, for example if the cash buyer milestone is set within the funding group, then this will return 'Cash Buyer'. This is currently the only time this happens, but it will be expanded upon in future development. | `null`, `timestamp`, string context such as `Cash Buyer` |\n| `context` | If the state of a milestone group requires further explanation this is the text to display | A string simple message |\n| `requires_action` | This is a boolean value that indicates that View My Chain feels some action is required to bring the sales progression back into line | `true`, `false` | \n| `requires_confirmation` | This is a boolean value when View My Chain is unsure of the state of this milestone group, such as when possible searches have been seens | `true`, `false` |","sectionType":"StandardSection","sysMeta":{"createdAt":"2018-06-06T07:47:33.208Z","updatedAt":"2018-06-06T07:47:33.208Z","contentType":"section"}}],"pageTemplate":"static","slug":"documentation-milestone-states","sysMeta":{"createdAt":"2018-01-26T13:04:19.725Z","updatedAt":"2018-07-10T13:44:21.901Z","contentType":"page"}}