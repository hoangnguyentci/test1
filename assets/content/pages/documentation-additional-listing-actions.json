{"pageTitle":"Documentation Additional Listing Actions","pageBlocks":[{"sectionEntryTitle":"Documentation Additional Listing Actions Section","sectionMessage":"# Additional Listing Actions #\n\nWe're going to take a look at what else you can do with a listing. We've already talked about adding a listing and adding milestones, but here we're going to talk about a few advanced actions.\n\n### Reopen Enquiries ###\nThis endpoint does exactly what is says on the tin, reopens enquiries. What this does behind the scenes is remove the \"Enquries Closed\" milestone and removes the `completed_at` timestamp against the \"Enquiries Opened\" milestone.\n\nHeres an example request:\n```shell\ncurl \\\n  -H \"Content-Type: application\/json\" \\\n  -H \"Authorization: Bearer <YOUR-ACCESS-TOKEN>\" \\\n  -X GET https:\/\/admin.viewmychain.com\/api\/v1\/listing\/1\/reopen-enquiries\n```\nAnd an example response:\n```json\n{\n  \"message\": \"success\",\n  \"success\": true,\n  \"data\": [],\n  \"errors\": []\n}\n```\n\n**API Reference**\n[https:\/\/admin.viewmychain.com\/api\/v1\/listing\/{listing}\/reopen-enquiries](\/docs\/api\/#operation\/reopen-enquiries)\n\n### Check whether a chain is complete ###\nA simple but useful check, is the chain of a given listing complete?\n```shell\ncurl \\\n  -H \"Content-Type: application\/json\" \\\n  -H \"Authorization: Bearer <YOUR-ACCESS-TOKEN>\" \\\n  -X GET https:\/\/admin.viewmychain.com\/api\/v1\/listing\/1\/is-complete\n```\n```json\n{\n  \"message\": \"success\",\n  \"success\": true,\n  \"data\": {\n    \"result\": true\n  },\n  \"errors\": []\n}\n```\nIf the chain is complete then the `result` value will tell you, in this case the chain is complete as the `result` value is `true`.\n\n**API reference**\n[https:\/\/admin.viewmychain.com\/api\/v1\/listing\/{listing}\/is-complete](\/docs\/api\/#operation\/listing-complete)\n\n### Lagging Listings ###\nThis endpoint allows you to get all listings from the chain of a given listing that are lagging behind the most advanced listing. For example, say you have a chain with 3 listings in it, all have SSTC but one listing has searches ordered, when you ask for the listings that are lagging, you will receive the two listings that only have the SSTC milestone, and not the listing that has the searches ordered milestone.\n\n```shell\ncurl \\\n  -H \"Content-Type: application\/json\" \\\n  -H \"Authorization: Bearer <YOUR-ACCESS-TOKEN>\" \\\n  -X GET https:\/\/admin.viewmychain.com\/api\/v1\/listing\/3\/lagging\n```\n\nResponse:\n```json\n{\n  \"data\": [\n    {\n      \"id\": 1,\n      \"type\": \"listing\",\n      \"attributes\": {\n        \"address_id\": 12345678,\n        \"branch_id\": 1,\n        \"price\": 100000,\n        \"chain_link_id\": \"DFAD3925-0322-49F4-8F14-BF516CE96097\",\n        \"is_locked\": false,\n        \"full_address\": \"1 Sample Street, Sample Town, AB12 3CD\",\n        \"address_street_name\": \"1 Sample Street\",\n        \"address_area\": \"Sample Town\",\n        \"address_postal_code\": \"AB12 3CD\",\n        \"created_at\": 1511264955,\n        \"updated_at\": 1511264955\n      }\n    },\n    {\n      \"id\": 2,\n      \"type\": \"listing\",\n      \"attributes\": {\n        \"address_id\": 12345678,\n        \"branch_id\": 1,\n        \"price\": 100000,\n        \"chain_link_id\": \"DFAD3925-0322-49F4-8F14-BF516CE96097\",\n        \"is_locked\": false,\n        \"full_address\": \"2 Sample Street, Sample Town, AB12 3CD\",\n        \"address_street_name\": \"2 Sample Street\",\n        \"address_area\": \"Sample Town\",\n        \"address_postal_code\": \"AB12 3CD\",\n        \"created_at\": 1511264955,\n        \"updated_at\": 1511264955\n      }\n    }\n  ],\n  \"links\": {\n    \"self\": \"https:\/\/admin.viewmychain.com\/api\/v1\/listing\/3\/lagging?page=1\",\n    \"last\": \"https:\/\/admin.viewmychain.com\/api\/v1\/listing\/3\/lagging?page=1\",\n    \"first\": \"https:\/\/admin.viewmychain.com\/api\/v1\/listing\/3\/lagging?page=1\"\n  },\n  \"meta\": {\n    \"pagination\": {\n      \"total\": 2,\n      \"count\": 2,\n      \"per_page\": 15,\n      \"current_page\": 1,\n      \"total_pages\": 1\n    }\n  }\n}\n```\n\n**API Reference**\n[https:\/\/admin.viewmychain.com\/api\/v1\/listing\/{listing}\/lagging](\/docs\/api\/#operation\/listing-lagging)\n\n### Make a Listing available ###\nLet's assume your listing has an SSTC milestone, however the buyer has backed out, a quick way to achieve this is to fall through your listing. Take the listing `id` and hit the end point like so:\n```shell\ncurl \\\n  -H \"Content-Type: application\/json\" \\\n  -H \"Authorization: Bearer <YOUR-ACCESS-TOKEN>\" \\\n  -X GET https:\/\/admin.viewmychain.com\/api\/v1\/listing\/3\/fall-through\n```\nIf successful the SSTC milestone will be removed from this listing and you will receive a standard success response:\n```json\n{\n  \"message\": \"success\",\n  \"success\": true,\n  \"data\": [],\n  \"errors\": []\n}\n```\n\n**API Reference**\n[https:\/\/admin.viewmychain.com\/api\/v1\/listing\/{listing}\/fall-through](\/docs\/api\/#operation\/listing-fall-through)\n\n### Complete a Listing ###\nThe purpose of this endpoint is for you as an agent to remove the listing from your stock list. If you do complete the listing, it will automatically assume all the other listings in the chain are complete and remove those too. If you do not complete your listings manually, fear not, when we receive data telling us they are complete will remove them automatically, this is only if you want to force the issue. You don't have to specify a date, if you don't then we will assume the listing was completed today, otherwise you can set a `completed_at` parameter which is a date in the format of `YYYY-MM-DD HH:MM:SS` i.e. `2018-01-25 12:00:00`\n\nHere is an example of this request:\n```shell\ncurl \\\n  -H \"Content-Type: application\/json\" \\\n  -H \"Authorization: Bearer <YOUR-ACCESS-TOKEN>\" \\\n  -X PUT -d {\"completed_at\": \"2018-01-25 12:00:00\" } \\\n  https:\/\/admin.viewmychain.com\/api\/v1\/listing\/3\/complete\n```\nIf successful, for all intents and purposes, the listing will no longer exist, if you try to get it, you will get a 404 response.\n```json\n\/\/ success response\n{\n  \"message\": \"success\",\n  \"success\": true,\n  \"data\": [],\n  \"errors\": []\n}\n```\n\n**API Reference**\n[https:\/\/admin.viewmychain.com\/api\/v1\/listing\/{listing}\/complete](\/docs\/api\/#operation\/complete-listing)\n\n### Attaching a Sales Negotiator ###\nIf you want to assign a sales negotiator to a listing, you will need three things, the users contact id, the listing id, and the role. Given you are attaching them as the sales negotiator the role is simply `sales negotiator`. If you don't have the listing yet following the steps above on finding a listing to help you, once you have then you need the listing `id`. Let's assume we're using the listing we created earlier. The only piece missing now is the users `contact_id`, we get this by getting the branch and including the users, we already have the branch id as we have the listing so the request will look like this:\n```shell\ncurl \\\n  -H \"Content-Type: application\/json\" \\\n  -H \"Authorization: Bearer <YOUR-ACCESS-TOKEN>\" \\\n  -X GET \\\n  https:\/\/admin.viewmychain.com\/api\/v1\/branch\/99999?includes=users\n```\nThe response should look like this:\n```json\n{\n  \"data\":{\n    \"type\":\"branch\",\n    \"id\":\"99999\",\n    \"attributes\":{\n      \"created_at\":1485865700,\n      \"updated_at\":1485865700,\n      \"deleted_at\":null,\n      \"brand_id\":9999,\n      \"name\":\"View My Chain Milton Keynes MK5 8FT\",\n      \"telephone\":\"01908 829400\",\n      \"email\":\"\",\n      \"website\":\"\"\n    },\n    \"relationships\":{\n      \"users\":{\n        \"data\":[{\n          \"type\":\"user\",\n          \"id\":\"229\"\n        },{\n          \"type\":\"user\",\n          \"id\":\"463\"\n        }]\n      }\n    }\n  },\n  \"included\":[{\n    \"type\":\"user\",\n    \"id\":\"229\",\n    \"attributes\":{\n      \"created_at\":1510830154,\n      \"updated_at\":1510830154,\n      \"deleted_at\":null,\n      \"first_name\":\"John\",\n      \"last_name\":\"Smith\",\n      \"email\":\"john.smith@viewmychain.com\",\n      \"contact_id\":227\n    }\n  },{\n    \"type\":\"user\",\n    \"id\":\"463\",\n    \"attributes\":{\n      \"created_at\":1505224612,\n      \"updated_at\":1505224651,\n      \"deleted_at\":null,\n      \"first_name\":\"Jane\",\n      \"last_name\":\"Doe\",\n      \"email\":\"jane.doe@viewmychain.com\",\n      \"contact_id\":471\n    }\n  }]\n}\n```\nAs you can see the View My Chain Milton Keynes branch has two users available as sales negotiators, once you have picked the one you would like i.e. Jane, you take the `contact_id` value (`471`).\n\nNow we have our three attributes, we can make the request to attach Jane as the progressor for our listing:\n```shell\ncurl \\\n  -H \"Content-Type: application\/json\" \\\n  -H \"Authorization: Bearer <YOUR-ACCESS-TOKEN>\" \\\n  -X POST -d {\"role\": \"sales negotiator\" } \\\n  https:\/\/admin.viewmychain.com\/api\/v1\/contact\/471\/listing\/1\/attach\n```\nIf successful you will get a simple success response:\n```json\n{\n  \"success\":true,\n  \"message\":\"success\",\n  \"errors\":[]\n}\n```\n> Users are created by invitation by the View My Chain team, or by a Branch Manager from the Branch Management page on View My Chain.\n\nTo retrieve the Sales Negotiator use this endpoint: [https:\/\/admin.viewmychain.com\/api\/v1\/listing\/{listing}\/sales-negotiator](docs\/api\/#operation\/listing-sales-negotiator)","sectionClass":"standard--static","sectionType":"StandardSection","sysMeta":{"createdAt":"2018-01-26T11:00:19.368Z","updatedAt":"2018-12-12T12:56:08.231Z","contentType":"section"}}],"pageTemplate":"static","slug":"documentation-additional-listing-actions","sysMeta":{"createdAt":"2018-01-26T10:32:22.195Z","updatedAt":"2018-12-12T12:32:42.123Z","contentType":"page"}}