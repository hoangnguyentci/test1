{"pageTitle":"Documentation Creating a Listing","pageBlocks":[{"sectionEntryTitle":"Documentation Creating Listing Section","sectionMessage":"# Creating a Listing #\n\nOnce you receive your access token, you're good to go and start creating listings. Creating a listing is very easy, the bare minimum required is an address and a branch. \n\nLet's start with an address; first you'll need to search for your address, using the address filter endpoint, we can pass in a `full_address` term to find relevant addresses.\n```shell\ncurl \\\n  -H \"Content-Type: application\/json\" \\\n  -H \"Authorization: Bearer <YOUR-ACCESS-TOKEN>\" \\\n  -X POST -d '{\"full_address\":\"6 Whittle Court Knowlhill\"}' \\\n  https:\/\/admin.viewmychain.com\/api\/v1\/address\/filter\n```\n\nYou will receive a json response that looks something like:\n```json\n{\n  \"data\":[\n    {\n      \"type\":\"address\",\n      \"id\":\"123456789\",\n      \"attributes\":{\n        \"verified_at\":null,\n        \"address_line_1\":\"6 WHITTLE COURT\",\n        \"full_address\":\"6 WHITTLE COURT, KNOWLHILL, MILTON KEYNES, MK5 8FT\",\n        \"post_town\":\"MILTON KEYNES\",\n        \"postcode\":\"MK5 8FT\",\n        \"is_parent\":false\n      }\n    }],\n    \"meta\":{\n      \"pagination\":{\n        \"total\":1,\n        \"count\":1,\n        \"per_page\":15,\n        \"current_page\":1,\n        \"total_pages\":1\n      }\n    },\n    \"links\":{\n      \"self\":\"https:\/\/admin.viewmychain.com\/api\/v1\/address\/filterpage=1\",\n      \"first\":\"https:\/\/admin.viewmychain.com\/api\/v1\/address\/filterpage=1\",\n      \"last\":\"https:\/\/admin.viewmychain.com\/api\/v1\/address\/filter?page=1\"\n    }\n  }\n```\nBecause we were specific, we only received one result which is perfect for this scenario. If your search didn't return any results the `data` array will be empty. We'll grab the `id` of the address from the first object inside the `data` array.\n\nNext we need the branch id; as with the address, we will filter for our branch:\n```shell\ncurl \\\n  -H \"Content-Type: application\/json\" \\\n  -H \"Authorization: Bearer <YOUR-ACCESS-TOKEN>\" \\\n  -X POST -d '{\"name\":\"view my chain milton keynes\"}' \\\n  https:\/\/admin.viewmychain.com\/api\/v1\/branch\/filter\n```\n```json\n{\n  \"data\":[{\n    \"type\":\"branch\",\n    \"id\":\"99999\",\n    \"attributes\":{\n      \"created_at\":1485865700,\n      \"updated_at\":1516865947,\n      \"deleted_at\":null,\n      \"brand_id\":9999,\n      \"name\":\"View My Chain MILTON KEYNES MK5 8FT\",\n      \"telephone\":\"01908 829400\",\n      \"email\":\"\",\n      \"website\":\"\"\n    }\n  }],\n  \"meta\":{\n    \"pagination\":{\n      \"total\":1,\n      \"count\":1,\n      \"per_page\":15,\n      \"current_page\":1,\n      \"total_pages\":1\n    }\n  },\n  \"links\":{\n    \"self\":\"https:\/\/admin.staging.viewmychain.com\/api\/v1\/branch\/filter?query=view+my+chain+milton+keynes&page=1\",\n    \"first\":\"https:\/\/admin.staging.viewmychain.com\/api\/v1\/branch\/filter?query=view+my+chain+milton+keynes&page=1\",\n    \"last\":\"https:\/\/admin.staging.viewmychain.com\/api\/v1\/branch\/filter?query=view+my+chain+milton+keynes&page=1\"\n  }\n}\n```\nAgain, as we were specific we have one result, so lets grab that branch `id` from the first object inside the `data` array.\n\nNow we have our address `id: 123456789` and our branch `id: 99999`, we can create our listing:\n\n```shell\ncurl \\\n  -H \"Content-Type: application\/json\" \\\n  -H \"Authorization: Bearer <YOUR-ACCESS-TOKEN>\" \\\n  -X POST -d '{\"address_id\":123456789, \"branch_id\": 99999}' \\\n  https:\/\/admin.viewmychain.com\/api\/v1\/listing\n```\nAnd you should receive a json response:\n```json\n{\n  \"data\": {\n    \"id\": 1,\n    \"type\": \"listing\",\n    \"attributes\": {\n      \"address_id\": 123456789,\n      \"branch_id\": 99999,\n      \"price\": null,\n      \"chain_link_id\": \"DFAD3925-0322-49F4-8F14-BF516CE96097\",\n      \"is_locked\": false,\n      \"full_address\": \"6 Whittle Court, Knowlhill, Milton Keynes, MK5 8FT\",\n      \"address_street_name\": \"6 Whittle Court\",\n      \"address_area\": \"Knowlhill\",\n      \"address_postal_code\": \"MK5 8FT\",\n      \"created_at\": 1511264955,\n      \"updated_at\": 1511264955\n    }\n  }\n}\n```\n#### Success :tada: ####\nYou have now created a listing! We recommend saving the listing `id` from the response, so that you can use it for future actions such as chaining, and adding and upating milestones.\n\n**API Reference Links**\n[https:\/\/admin.viewmychain.com\/api\/v1\/address\/filter](\/docs\/api\/#operation\/filter-addresses)\n[https:\/\/admin.viewmychain.com\/api\/v1\/branch\/filter](\/docs\/api\/#operation\/filter-branches)\n[https:\/\/admin.viewmychain.com\/api\/v1\/listing](\/docs\/api\/#operation\/create-listing)\n\n# Finding a Listing #\nCreating a listing is a great start, but View My Chain already has a lot of listings available to you, so before creating one it may be worth checking if one exists first. To see if your listing already exists we can use the listings `filter` endpoint to search for listings with the given branch and address.\n\n```shell\ncurl \\\n  -H \"Content-Type: application\/json\" \\\n  -H \"Authorization: Bearer <YOUR-ACCESS-TOKEN>\" \\\n  -X POST -d '{\"address\":123456789, \"branch\": 99999}' \\\n  https:\/\/admin.viewmychain.com\/api\/v1\/listing\/filter\n```\n\nIf we have any listings that match, and, importantly, they are your listings i.e. they belong to the same branch as you, then you will get a response like this:\n```json\n{\n  \"data\": {\n    \"id\": 1,\n    \"type\": \"listing\",\n    \"attributes\": {\n      \"address_id\": 123456789,\n      \"branch_id\": 99999,\n      \"price\": null,\n      \"chain_link_id\": \"DFAD3925-0322-49F4-8F14-BF516CE96097\",\n      \"is_locked\": false,\n      \"full_address\": \"6 Whittle Court, Knowlhill, Milton Keynes, MK5 8FT\",\n      \"address_street_name\": \"6 Whittle Court\",\n      \"address_area\": \"Knowlhill\",\n      \"address_postal_code\": \"MK5 8FT\",\n      \"created_at\": 1511264955,\n      \"updated_at\": 1511264955\n    }\n  }\n}\n```\nThis response tells us that the listing you were going to create already exists, so you can use that one, and save the listing `id` against your listing object for future reference. For more information about what filters are avaliable, take a look at the [filter](\/docs\/api\/#operation\/filter-listings) endpoint in more detail.\n\n** However... **\nWhat if the listing you are looking for doesn't belong to one of your branches? Well, you would use a slightly different endpoint, the `exists` endpoint, which does a comprehensive search of all listings inside View My Chain:\n```shell\ncurl \\\n  -H \"Content-Type: application\/json\" \\\n  -H \"Authorization: Bearer <YOUR-ACCESS-TOKEN>\" \\\n  -X POST -d '{\"address\":123456789, \"branch\": 99999}' \\\n  https:\/\/admin.viewmychain.com\/api\/v1\/listing\/exists\n```\nThe difference between the `filter` and `exists` endpoints, is the scope of listings each one searches. `filter` allows more filter terms to be applied to further fine tune your search, but only searches for listings that belong to your branches, the `exists` endpoint **only** accepts the `branch` and `address` parameters, and can **only** include the listings `branch`, any other includes and nested includes will be ignored on the `exists` endpoint. The exists endpoint is quite useful when you consider [chaining listings together](\/docs\/chaining); you don't always need to create a listing before chaining it to one of your own.\n\n### A shortcut ###\nWhilst both these endpoints [filter](\/docs\/api\/#operation\/filter-listings) and [exists](\/docs\/api\/#operation\/listings-exists) require an address and\/or branch, you don't need to pass in the `id`s, you can pass in search terms and allow us to search based on those pieces of data, its not as accurate as the above method, but it will save you having to find the address and branch first, particularly if you don't have them, and if you are specific with your search terms, it is just as effective. The parameters are `full_address` and `branch_name`. \n\nThe `full_address` parameter is named as such as it is going to try and match against the full address of the listing, you can pass in any partial address term here, although postcode is good bet, or house number and street name, for added effect pass in the town or village as well. \n\nThe `branch_name` parameter again will take the term you pass here and match it against the listing's branch name, it can be a partial as well, but just so you know, and for ease, our naming convention for branches is <BRAND NAME> <LOCALITY>, so if the brand is \"View My Chain and they have a branch in \"Milton Keynes\", you can be pretty safe passing in \"View My Chain Milton Keynes\" and the branch search  will match all listings against the correct branch. Here's an example:\n\n```shell\ncurl \\\n  -H \"Content-Type: application\/json\" \\\n  -H \"Authorization: Bearer <YOUR-ACCESS-TOKEN>\" \\\n  -X POST -d '{\"full_address\": \"6 Whittle Court Knowlhill\" , \"branch_name\": \"View My Chain Milton Keynes\"}' \\\n  https:\/\/admin.viewmychain.com\/api\/v1\/listing\/exists\n```\nResponse:\n```json\n{\n  \"data\": {\n    \"id\": 1,\n    \"type\": \"listing\",\n    \"attributes\": {\n      \"address_id\": 123456789,\n      \"branch_id\": 99999,\n      \"price\": null,\n      \"chain_link_id\": \"DFAD3925-0322-49F4-8F14-BF516CE96097\",\n      \"is_locked\": false,\n      \"full_address\": \"6 Whittle Court, Knowlhill, Milton Keynes, MK5 8FT\",\n      \"address_street_name\": \"6 Whittle Court\",\n      \"address_area\": \"Knowlhill\",\n      \"address_postal_code\": \"MK5 8FT\",\n      \"created_at\": 1511264955,\n      \"updated_at\": 1511264955\n    }\n  }\n}\n```\n\nAs you can see, if you use the search terms effectively, it can save you API requests and time. In this situation we returned the exact same results as passing in the `branch` and `address`. Ultimately, it is up to you how you implement finding a listing, if you're confident of your search terms use the shortcut, if you're not so sure try finding the branch and address separately first.\n\n**API Reference Links**\n[https:\/\/admin.viewmychain.com\/api\/v1\/listing\/filter](\/docs\/api\/#operation\/filter-listings)\n[https:\/\/admin.viewmychain.com\/api\/v1\/listing\/exists](\/docs\/api\/#operation\/listings-exists)","sectionClass":"standard--static","sectionType":"StandardSection","sysMeta":{"createdAt":"2018-01-25T12:25:04.897Z","updatedAt":"2018-12-12T12:55:46.758Z","contentType":"section"}}],"pageTemplate":"static","slug":"documentation-creating-a-listing","sysMeta":{"createdAt":"2018-01-25T13:25:22.393Z","updatedAt":"2018-01-26T12:17:42.468Z","contentType":"page"}}